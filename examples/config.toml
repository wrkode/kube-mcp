# Example kube-mcp configuration file

[server]
# Enabled transports: stdio, http
# 
# STDIO transport (default):
#   - Uses stdin/stdout for MCP communication
#   - No configuration section needed - just set transports = ["stdio"]
#   - Recommended for MCP clients like Cursor
#   - Example: transports = ["stdio"]
#
# HTTP transport (Streamable HTTP):
#   - Requires [server.http] section (see below)
#   - Uses Streamable HTTP transport for efficient bidirectional communication
#   - Example: transports = ["http"]
#
# Multiple transports:
#   - Example: transports = ["stdio", "http"]
#
# Current example uses HTTP transport
transports = ["http"]
log_level = "info"

# Normalize tool names for n8n compatibility (replaces dots with underscores)
# When enabled: "autoscaling.hpa_explain" becomes "autoscaling_hpa_explain"
# Set to true if using n8n or other clients that don't support dots in function names
normalize_tool_names = false

# Note: STDIO transport doesn't require a [server.stdio] section
# It automatically uses stdin/stdout for communication
# This is the recommended transport for MCP clients like Cursor

# Note: STDIO transport doesn't require a [server.stdio] section
# It automatically uses stdin/stdout for communication
# This is the recommended transport for MCP clients like Cursor

[server.http]
address = "0.0.0.0:8080"

[server.http.oauth]
enabled = false
provider = "oidc"
issuer_url = ""
client_id = ""
client_secret = ""

[server.http.cors]
enabled = true
allowed_origins = ["*"]
allowed_methods = ["GET", "POST", "OPTIONS"]
allowed_headers = ["Content-Type", "Authorization"]

[kubernetes]
# Provider: kubeconfig, in-cluster, single
provider = "kubeconfig"
kubeconfig_path = "/etc/kube-mcp/kubeconfig"
context = ""
default_namespace = ""
qps = 100
burst = 200
timeout = "30s"

[security]
read_only = false
non_destructive = false
denied_gvks = []
require_rbac = true

[helm]
storage_driver = "secret"
default_namespace = "default"

[kubevirt]
enabled = true
vm_group_version = "kubevirt.io/v1"

[kiali]
enabled = false
url = "http://kiali.istio-system:20001"
token = ""
timeout = "30s"

[kiali.tls]
enabled = false
ca_file = ""
cert_file = ""
key_file = ""
insecure_skip_verify = false

[toolsets.gitops]
enabled = true

[toolsets.policy]
enabled = true

[toolsets.capi]
enabled = true

[toolsets.rollouts]
enabled = true

[toolsets.certs]
enabled = true

[toolsets.autoscaling]
enabled = true

[toolsets.backup]
enabled = true

[toolsets.net]
enabled = true
# Hubble API URL (optional, for flow queries)
hubble_api_url = ""
# Hubble TLS configuration
hubble_insecure = false
hubble_ca_file = ""
# Hubble request timeout
hubble_timeout = "10s"
